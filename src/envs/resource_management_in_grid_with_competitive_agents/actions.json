{
  "ResourceMiner": [
    {
      "id": 1,
      "name": "observe_round_state",
      "condition": null,
      "description": "The miner receives the start-of-round briefing, records the public ownership map and prior round log, and prepares to compute a new action bundle.",
      "type": "OR",
      "required_variables": [],
      "output_updates": [
        {
          "name": "round_context",
          "type": "dict",
          "context": "agent",
          "description": "Snapshot of the current round including ownership map, stamina budget, mining cap, prior public log, and any personal summary."
        }
      ],
      "code": ""
    },
    {
      "id": 2,
      "name": "decide_action_bundle",
      "condition": "Round context observed",
      "description": "Using the public information and personal history, the miner composes a claim/raid/defend/mine bundle that respects legality and stamina budgeting rules, optionally providing priority orders for deterministic clipping.",
      "type": "OR",
      "required_variables": [
        {
          "name": "round_context",
          "type": "dict",
          "context": "agent",
          "description": "Current round information used to reason about the action bundle."
        }
      ],
      "output_updates": [
        {
          "name": "proposed_action_bundle",
          "type": "dict",
          "context": "agent",
          "description": "The action bundle submitted to the environment including claims, raids, defense commitments, mining allocations, and optional priority metadata."
        }
      ],
      "code": ""
    },
    {
      "id": 3,
      "name": "handle_round_resolution",
      "condition": "Environment publishes round resolution",
      "description": "The miner records the executed plan, stamina spending, gold output, and ownership changes reported by the environment for learning in future rounds.",
      "type": "AND",
      "required_variables": [],
      "output_updates": [
        {
          "name": "last_round_summary",
          "type": "dict",
          "context": "agent",
          "description": "Detailed record of the environment's round summary for this agent."
        },
        {
          "name": "total_gold",
          "type": "int",
          "context": "agent",
          "description": "Cumulative gold mined by the agent across rounds."
        }
      ],
      "code": ""
    }
  ],
  "EnvAgent": [
    {
      "id": 0,
      "name": "start",
      "condition": null,
      "description": "Initialises the simulation round and dispatches the public observation package to each miner.",
      "type": "OR",
      "required_variables": [],
      "output_updates": [
        {
          "name": "round_initialised",
          "type": "bool",
          "context": "env",
          "description": "Flag indicating the environment has generated the start-of-round observation."
        }
      ],
      "code": ""
    },
    {
      "id": 1,
      "name": "handle_action_bundle",
      "condition": "Miner submits an action bundle",
      "description": "Validates, sanitises, and stores the incoming action bundle prior to deterministic budget clipping and conflict resolution.",
      "type": "AND",
      "required_variables": [],
      "output_updates": [
        {
          "name": "round_submissions",
          "type": "dict",
          "context": "env",
          "description": "Collection of all miner action bundles received for the current round."
        }
      ],
      "code": ""
    },
    {
      "id": 2,
      "name": "resolve_round",
      "condition": "All miners have submitted",
      "description": "Executes legality checks, deterministic conflict resolution, mining, and round summary generation before notifying miners.",
      "type": "AND",
      "required_variables": [],
      "output_updates": [
        {
          "name": "round_results",
          "type": "dict",
          "context": "env",
          "description": "Computed summaries including ownership updates, mining outputs, and public logs for the resolved round."
        }
      ],
      "code": ""
    }
  ]
}
